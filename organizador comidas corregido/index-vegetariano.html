<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Plato Resuelto - Vegetariano</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Courgette&family=Raleway:wght@400;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="css/style.css">

</head>



<body>
   
   <button id="logoutBtn" style="display:none">Cerrar sesi√≥n</button>
   

   <!-- üîí contenido protegido -->
   <div id="contenido" style="display:none;">
     <div class="btn-calendario-container">
    <a href="javascript:void(0)" onclick="mostrarTutorial()" class="btn-calendario">üìò Ver tutorial</a>
    <a href="index.html" class="btn-calendario">Volver a calendario tradicional</a>
   </div>

   <a href="#calendario" id="btnHoy" class="btn-calendario btn-flotante">¬øYa elegiste tu men√∫ de hoy?</a>
 
   <h1>PlatoResuelto!</h1>
  <h2>Vegetariano</h2>
  <h2>Organiz√° tus comidas</h2>

  <div style="text-align:center; margin:20px 0;">
    <img src="plato-buen-comer-bis.jpg" alt="Plato saludable" class="plato-saludable">
  </div>

 <!-- scroll de arma tu ensalada-->
  <h3 id="plato-semana">Arm√° un plato para la semana</h3>




  <!-- Selector de Verduras y Ensaladas -->
   <select id="verdura">
    <option value=""> Verduras y hortalizas </option>
      <option value="Ens.(lechuga,tomate,cebolla)">Ens.(lechuga,tomate,cebolla)</option>
     <option value="Ens.(lechuga,tomate,cebolla,palta)">Ens.(lechuga,tomate,cebolla,palta)</option>
     <option value="Ens.(lechuga,zanahoria,repollo)">Ens.(lechuga,zanahoria,repollo)</option>
     <option value="Ens.(rucula,zanahoria,repollo)">Ens.(r√∫cula,zanahoria,repollo)</option>
     <option value="Ens.(achicoria,zanahoria,repollo)">Ens.(achicoria,zanahoria,repollo)</option>
     <option value="Ens.(rucula,t.cherry,palta)">Ens.(r√∫cula,t.cherry,palta)</option>
     <option value="Ens.(zanahoria,remolacha,repollo)">Ens.(zanahoria,remolacha,repollo)</option>
     <option value="Ens.(apio,manzana-verde,nueces)">Ens.(Apio,manzana verde, nueces)</option>
     <option value="salteado (cebolla,pimiento,zanahoria)">Salteado(cebolla,pimiento,zanahoria)</option>
     <option value="salteado (zucchini,berenjena,cebolla)">Salteado(zucchini,berenjena,cebolla)</option>
     <option value="horno (cebolla,zanahoria,pimiento,calabaza)">Horno(cebolla,zanahoria,pimiento,calabaza)</option>
     <option value="pure zapallo-calabaza">Pur√© zapallo/calabaza</option>
  
      <option value="ensaladas">ü•ó Arm√° tu ensalada</option>
  <!-- üëá opci√≥n ‚Äúcustom‚Äù para inyectar la ensalada armada -->
  <option id="verduraCustom" value="" style="display:none;"></option>
  </select>

  
</select>

 <div id="ensalada" class="subgrilla" style="display:none;">
  <!-- üîπ Nueva fila con t√≠tulo + bot√≥n chiquito -->
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h4 style="margin:0;">Arm√° tu ensalada</h4>
    
  </div>

  <p>Eleg√≠ el tipo de cocci√≥n:</p>
  <div class="opciones-coccion">
    <label><input type="radio" name="coccion" value="Crudo"> Crudo</label>
    <label><input type="radio" name="coccion" value="Salteado"> Salteado</label>
    <label><input type="radio" name="coccion" value="Horno"> Horno</label>
    <label><input type="radio" name="coccion" value="Hervido"> Hervido</label>
  </div>

  <p>Seleccion√° las verduras:</p>
  <div class="opciones-ensalada">
   <label class="chip"><input type="checkbox" value="Lechuga">Lechuga</label>
    <label class="chip"><input type="checkbox" value="R√∫cula">R√∫cula</label>
    <label class="chip"><input type="checkbox" value="Achicoria">Achicoria</label>
    <label class="chip"><input type="checkbox" value="Espinaca">Espinaca</label>
    <label class="chip"><input type="checkbox" value="Acelga">Acelga</label>
    <label class="chip"><input type="checkbox" value="Repollo">Repollo</label>
    <label class="chip"><input type="checkbox" value="Tomate">Tomate</label>
    <label class="chip"><input type="checkbox" value="Tomate cherry">Tomate cherry</label>
    <label class="chip"><input type="checkbox" value="Cebolla">Cebolla</label>
    <label class="chip"><input type="checkbox" value="Cebolla verdeo">Cebolla verdeo</label>
    <label class="chip"><input type="checkbox" value="Puerro">Puerro</label>
    <label class="chip"><input type="checkbox" value="Ajo">Ajo</label>
    <label class="chip"><input type="checkbox" value="Pimiento">Pimiento</label>
    <label class="chip"><input type="checkbox" value="Zanahoria">Zanahoria</label>
    <label class="chip"><input type="checkbox" value="Remolacha">Remolacha</label>
    <label class="chip"><input type="checkbox" value="Zapallito">Zapallito</label>
    <label class="chip"><input type="checkbox" value="Zucchini">Zucchini</label>
    <label class="chip"><input type="checkbox" value="Berenjena">Berenjena</label>
    <label class="chip"><input type="checkbox" value="Pepino">Pepino</label>
    <label class="chip"><input type="checkbox" value="Calabaza">Calabaza</label>
    <label class="chip"><input type="checkbox" value="Zapallo">Zapallo</label>
    <label class="chip"><input type="checkbox" value="Arvejas">Arvejas</label>
    <label class="chip"><input type="checkbox" value="Chaucha">Chaucha</label>
    <label class="chip"><input type="checkbox" value="Brocoli">Brocoli</label>
    <label class="chip"><input type="checkbox" value="Coliflor">Coliflor</label>
    <label class="chip"><input type="checkbox" value="Alcaucil">Alcaucil</label>
    <label class="chip"><input type="checkbox" value="Apio">Apio</label>
  </div>

  <button type="button" onclick="copiarEnsalada()" class="btn-mini">Agregar ensalada</button>
</div>



  <select id="proteina">
    <option value=""> Prote√≠nas vegetarianas </option>
       <option value="Huevo duro">Huevo duro</option>
       <option value="Huevo revuelto">Huevo revuelto</option>
       <option value="Huevo a la plancha">Huevo a la plancha</option>
       <option value="Medallon de legumbre">Medallon de legumbre</option>
       <option value="Milanesa de legumbre">Milanesa de legumbre</option>
       <option value="lentejas">Lentejas</option>
       <option value="garbanzos">Garbanzos</option>
       <option value="porotos">Porotos</option>
       <option value="soja">Soja</option>
       <option value="Soja texturizada">Soja texturizada</option>
       <option value="tofu">Tofu</option>
       <option value="tempeh">Tempeh</option>
       <option value="ricota">Ricota</option>
       <option value="quesos">Quesos</option>
  </select>

  <select id="hidrato">
    <option value=""> Hidratos de carbono </option>
      <option value="Arroz">Arroz</option>
     <option value="Arroz integral/yaman√≠">Arroz integral/yaman√≠</option>
     <option value="Fideos">Fideos</option>
     <option value="Pure de papa">Pure de papa</option>
     <option value="Papa al horno">Papa al horno</option>
     <option value="Batata al horno">Batata al horno</option>
     <option value="Choclo">Choclo</option>
     <option value="Quinoa">Qu√≠noa</option>
     <option value="Cuscus">Cusc√∫s</option>
     <option value="Trigo-burgol">Trigo burgol</option>
  </select>

  <select id="completo">
    <option value=""> Plato completo </option>
    <option value="Tarta de espinaca, queso, cebolla y puerro">Tarta de espinaca, queso, cebolla y puerro</option>
    <option value="Tarta capresse ( T. cherry, q. cremoso, albahaca, aceitunas negras)">Tarta capresse ( T. cherry, q. cremoso, albahaca, aceitunas negras)</option>
    <option value="Tarta de zapallito, queso, huevo y cebolla">Tarta de zapallito, queso, huevo y cebolla</option>
    <option value="Milanesas de berenjena gratinadas + guacamole">Milanesas de berenjena gratinadas + guacamole</option>
    <option value="Pastel de papa y zapallo">Pastel de papa y zapallo</option>
    <option value="Omeltte de queso y espinaca + Ens. Lenteja y tomate">Omeltte de queso y espinaca + Ens. Lenteja y tomate</option>
    <option value="Crepes des espinaca,cebolla, c.verdeo + salsa de morr√≥n y crema">Crepes des espinaca,cebolla, c.verdeo + salsa de morr√≥n y crema</option>
    <option value="Wok de fideos de arroz + verduras(pimiento,cebolla,zucchini,zanahoria)">Wok de fideos de arroz + verduras(pimiento,cebolla,zucchini,zanahoria)</option>
    <option value="Fajitas de verduras varias(cebolla, pimiento, zanahoria, berenjena)">Fajitas de verduras varias(cebolla, pimiento, zanahoria, berenjena)</option>
    < <option value="Torrejas de arroz + ensalada de zanahoria , rucula, tomate y huevo">Torrejas de arroz + ensalada de zanahoria , rucula, tomate y huevo</option>
     <option value="Ravioles con salsa de tomate">Ravioles con salsa de tomate</option>
     <option value="Ravioles con salsa mixta">Ravioles con salsa mixta</option>
     <option value="√ëoquis con salsa de tomate">√ëoquis con salsa de tomate</option>
     <option value="√ëoquis con salsa mixta">√ëoquis con salsa mixta</option>
     
  </select>

  <button onclick="validarPlato()">Agreg√° el plato al calendario</button>
      
      
      <h2>üóìÔ∏è Calendario semanal</h2>
  

  <table id="calendario">
    <thead><tr><th>D√≠a</th><th>Almuerzo</th><th>Cena</th></tr></thead>
    <tbody id="calendario-body"></tbody>
  </table>

  <div class="top-buttons">
    
    <button onclick="resetearCalendario()">üîÑ Resetear calendario</button>

    <button onclick="generarCalendarioAleatorioVeg()">üé≤ Generar semana aleatoria</button>
    
    <button onclick="descargarPDF()">üì• Descarg√° tu men√∫ semanal (PDF)</button>
    
    <button onclick="window.open('https://forms.gle/ddyvdbKZqHhuM8W77','_blank')">Sugerinos un nuevo alimento o Plato</button>

     <div class="btn-calendario-container">
      <a href="nosotros.html" class="btn-calendario">Sobre nosotros</a>
     </div>
    
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>


<script src="js/compartido.js" defer></script>
<script src="js/vegetariano.js" defer></script>
<script src="js/pwa.js" defer></script>

<div id="mensaje" class="mensaje-toast"></div>

</div> <!-- üîí cierra contenido protegido -->


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";
  import { getFirestore, doc, setDoc, getDoc } 
    from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

  // üîπ Configuraci√≥n de Firebase (misma que en index.html)
  const firebaseConfig = {
    apiKey: "AIzaSyBgyXUiZPdYlWQBclhhH70mfRuIXIuw2EE",
    authDomain: "plato-resuelto.firebaseapp.com",
    projectId: "plato-resuelto",
    storageBucket: "plato-resuelto.firebasestorage.app",
    messagingSenderId: "11080746612",
    appId: "1:11080746612:web:22f488078f01def94ff321",
    measurementId: "G-16RQJ5KB0H"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Contenedor del contenido protegido
  const contenido = document.getElementById("contenido");

  // ---------- FUNCIONES FIRESTORE ----------
  async function guardarCalendario(user) {
    await setDoc(doc(db, "calendarios", user.uid), {
      vegetariano: calendario
    }, { merge: true });
  }

  async function cargarCalendario(user) {
    const docSnap = await getDoc(doc(db, "calendarios", user.uid));
    if (docSnap.exists() && docSnap.data().vegetariano) {
      calendario = docSnap.data().vegetariano;
      actualizarCalendario();
    }
  }

  // ---------- DETECTAR SESI√ìN ----------
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      contenido.style.display = "block";

      await cargarCalendario(user);

      document.addEventListener("change", () => guardarCalendario(user));
      document.addEventListener("click", (e) => {
        if (e.target.tagName === "BUTTON") guardarCalendario(user);
      });
    } else {
      // üö® Si no est√° logueado ‚Üí redirigimos al index.html
      window.location.href = "index.html";
    }
  });
</script>













